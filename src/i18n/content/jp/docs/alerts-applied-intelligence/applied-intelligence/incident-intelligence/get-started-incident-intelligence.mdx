---
title: インシデント・インテリジェンスを始めよう
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - Incident intelligence
metaDescription: Read about how to configure and set up Incident Intelligence destination and sources.
translationType: machine
---

[Applied Intelligence](/docs/introduction-new-relic-ai) の一部である Incident Intelligence は、インシデントの相関性を高め、環境のノイズを低減するのに役立ちます。インシデントインテリジェンスは、すべてのインシデント、そのソース、関連イベントの概要を提供します。

まだお持ちでない方は、 [サインアップしてNew Relicアカウント](https://newrelic.com/signup) を取得してください。

<Callout variant="important">
  パスウェイは非推奨となり、代わりに [ワークフロー](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/) が使用されるようになりました。

  New Relic One で Pathways にアクセスできる場合は、New Relic のアカウント担当者に連絡して、アップグレードを依頼してください。
</Callout>

## インシデント・インテリジェンスの設定 [#get-started]

インシデント・インテリジェンスを有効にするには、以下の手順に従ってください。その後、課題フィードに課題が表示されるようになります。

* [1.環境を整える（1回のみ）](#1-configure-environment).
* [2.ソースの設定](#1-configure-sources).
* [3.デスティネーションの設定](#2-configure-destinations).
* [4.ワークフローを設定する](#3-configure-workflows).

## 1.環境設定（1回のみ） [#1-configure-environment]

インシデントインテリジェンスで環境を設定するには、管理者がそのためのNew Relicアカウントを選択する必要があります。このアカウントは、あなたのチームが使用しているものでなければなりません。

* **誰が環境を設定するのですか？** 管理者のみ、しかも管理者権限のあるアカウントに限ります。
* **管理者は複数の環境を設定できますか？** 親アカウントとその子アカウントにつき、1つの環境を設定できます。管理者が複数の親アカウントの権限を持っている場合は、複数の環境を設定することができます。

<Callout variant="tip">
  インシデントインテリジェンスは、クロスアカウントの製品です。つまり、どのNew Relicアカウントや外部ソースからでもデータを送信して、イベントを相関させることができます。
</Callout>

## 2.ソースの設定 [#1-configure-sources]

環境を整えた後は、インシデントソースを決定します。これがデータのインプットとなります。

以下のいずれかのソースからデータを得ることができます。

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="configure-source-nr-alerts"
    title="アラート"
  >
    インシデント・インテリジェンスをアラート・バイオレーションと統合することで、モニタリングしている内容からコンテキストや相関関係を得ることができます。

    アラートからデータを取得するには

    1. **[one.newrelic.com](https://one.newrelic.com)**から、**Alerts**をクリックします。

    2. 左側の**Incident Intelligence**で、**Sources**をクリックしてから、**Alerts**をクリックします。

    3. 応用インテリジェンスに接続するポリシーを選択し、**Connect**をクリックします。

       **ソース> アラート** でアラートポリシーを追加したり、接続済みのポリシーを削除することができます。

       <Callout variant="tip">
         アラートをソースとして追加しても、現在の設定や通知に影響はありません。
       </Callout>
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-algorithmia"
    title="Datarobot (旧Algorithmia)"
  >
    Incident Intelligence を Datarobot の機械学習モデルと統合することで、機械学習モデルのパフォーマンスを監視することができます。Incident Intelligence用にDatarobotを設定するには、 [統合ドキュメント](/docs/integrations/mlops-integrations/algorithmia-mlops-integration/) を参照してください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-aporia"
    title="アポリア（MLOps）"
  >
    Incident IntelligenceとAporiaの機械学習モデルを統合することで、機械学習モデルのパフォーマンスを監視することができます。Aporiaの統合を設定するには、 [docs](/docs/integrations/mlops-integrations/aporia-mlops-integration/) を参照してください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-aporia"
    title="スーパーワイズ（MLOps）"
  >
    Incident IntelligenceをSuperwiseの機械学習モデルと統合することで、機械学習モデルのパフォーマンスを監視することができます。当社のSuperwiseインテグレーションを設定するには、当社の [docs](/docs/alerts-applied-intelligence/mlops/integrations/superwise-mlops-integration/) をご覧ください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-anomalies"
    title="アノマリー"
  >
    インシデントインテリジェンスをNew Relic [Proactive Detection](/docs/alerts-applied-intelligence/applied-intelligence/proactive-detection/proactive-detection-applied-intelligence) の異常と統合することで、監視している内容からコンテキストや相関関係を得ることができます。

    New Relic Proactive Detectionのアノマリーからデータを取得するため。

    1. [one.newrelic.com](https://one.newrelic.com) から、 **Alerts& AI** をクリックします。
    2. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **Anomalies** をクリックします。
    3. オン（緑）に切り替えて、Applied Intelligenceに接続する構成を選択します。

    アラートポリシーを追加または削除するには、 **Alerts& AI** から、 **Sources** をクリックし、次に **Alerts** をクリックします。

    <Callout variant="tip">
      ソースとして異常を追加しても、現在のプロアクティブディテクションの設定や通知には影響しません。
    </Callout>
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-aws"
    title="AWS"
  >
    Incident IntelligenceをAmazon CloudWatchと統合することで、すべてのAWSサービスのインシデント管理を行うことができます。

    Amazon CloudWatchを統合するために。

    1. **[one.newrelic.com](https://one.newrelic.com)** にアクセスし、 **Alerts& AI** をクリックします。

    2. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **Amazon Web Services** をクリックします。

    3. URLをコピーします。

    4. [新しいAmazon SNSトピックの作成](https://docs.aws.amazon.com/sns/latest/dg/sns-getting-started.html).

    5. すべての **Alarms** の状態変更をそのトピックに転送するように CloudWatch を設定します。

       * Amazon CloudWatch UIで、 **Events> Event Pattern** をクリックします。
       * 選択 **サービス名> CloudWatch**.
       * Select **Event Type> CloudWatch Alarm State Change**.
       * **Targets> SNS Topic** を選択し、新しい Amazon SNS トピックを選択します。

    6. 新しいサブスクリプションを作成します。

       * Amazon AWS UIで、 **Create a Subscription** をクリックします。
       * 新しいAmazon SNSトピックを選択します。
       * **プロトコル> HTTPS を選択**.
       * **Endpoint** に、先ほどApplied Intelligence **Sources** からコピーしたURLを貼り付けます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-grafana"
    title="Grafana"
  >
    Incident IntelligenceとGrafanaの通知を統合することで、アプリケーションや環境全体のイベントを把握することができます。GrafanaのWebhook通知は、HTTP経由でカスタムエンドポイントに情報を送信するシンプルな方法です。

    Grafanaを新しいwebhookとして統合するために。

    1. 管理者権限でGrafanaポータルにログインし、 **Alerting** を選択します。
    2. Grafana **Notification Channels** ページで、 **New Channel> Webhook** をクリックします。
    3. **[one.newrelic.com](https://one.newrelic.com)** にアクセスし、 **Alerts& AI** をクリックします。
    4. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **Grafana** をクリックします。
    5. URLをコピーして、新しいGrafana webhookに貼り付けます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-pagerduty"
    title="PagerDuty"
  >
    <Callout title="有効期限（EOL）の通知">
      2021年10月をもって、Suggested Resporter、Golden Signal、Component Enrichmentなど、PagerDutyのいくつかの機能のサポートを終了しました。この移行を簡単に行う方法などの詳細については、 [Explorers Hub の記事](https://discuss.newrelic.com/t/upcoming-changes-to-capabilities-and-support-across-node-agents-suggested-pagerduty-responders-golden-signals-and-components-incident-workflows-mobile-agent-cross-application-tracing-cat-and-kubernetes-instrumentation/164481) をご覧ください。
    </Callout>

    Incident Intelligence を PagerDuty サービスに直接統合することで、PagerDuty のすべてのインシデントを取り込み、処理し、強化することができます。PagerDuty サービスを Applied Intelligence に接続しても、現在のサービスや通知に影響はありません。

    PagerDutyからデータを取得するには

    1. あなたの [PagerDuty API キー](https://support.pagerduty.com/docs/generating-api-keys) が書き込み権限を持っていることを確認してください。

    2. From **[one.newrelic.com](https://one.newrelic.com)** , click **Alerts& AI**.

    3. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **PagerDuty** をクリックします。

    4. あなたの [PagerDuty API キーを入力してください](https://support.pagerduty.com/docs/generating-api-keys) 。

       * キーは、書き込み権限のあるパーソナルアクセスキーまたはジェネラルアクセスキーのいずれかでなければなりません。ユーザーが作成する場合、そのユーザーはadminでなければなりません。

    5. Applied Intelligence に接続する PagerDuty サービスを選択し、 **Connect** をクリックします。

       **Sources> PagerDuty** で、サービスを追加したり、すでに接続しているサービスを削除したりすることができます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-prometheus"
    title="Prometheus Alertmanager"
  >
    Incident IntelligenceとPrometheus Alertmanagerを統合することで、Prometheusのアラートと他のソースからのイベントを受信し、相関させることができます。

    Prometheus Alertmanagerを統合する。

    1. を実行して、Alertmanagerの設定ファイルをセットアップします。

       ```
       ./alertmanager -config.file=simple.yml
       ```

    2. **[one.newrelic.com](https://one.newrelic.com)** にアクセスし、 **Alerts& AI** をクリックします。

    3. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **Prometheus Alertmanager** をクリックします。

    4. Prometheus Alertmanager の URL をコピーして、Alertmanager 設定ファイルの `< webhook_config>/` セクションに貼り付けます。

    5. 2つの方法のいずれかで、Prometheus Alertmanagerの設定をリロードします。

       * `SIGHUP` をプロセスに送ります。
       * HTTP `POST` リクエストを `/-/reload` エンドポイントに送信します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-rest-api"
    title="REST API"
  >
    Incident Intelligenceは、専用のREST APIインターフェイスをサポートしており、追加のシステムとの統合が可能です。このインターフェースでは、お客様のコードや他の監視ソリューションをインスツルメンテーションして、あらゆる種類のメトリックやイベントをレポートすることができます。

    * メトリクスには、CPU、メモリ、ディスク使用率などの生のデータポイントや、ビジネスKPIなどがあります。

    * イベントには、監視アラート、デプロイメントイベント、インシデント、例外、その他記述したい状態の変化などがあります。

      また、お客様自身のシステムやアプリケーションから、あらゆるタイプのデータを直接Incident Intelligenceに送信することができます。REST APIは、安全なトークンベースの認証をサポートし、入力としてJSONコンテンツを受け入れます。

      認証の詳細やAPIリファレンスの全文は、 [REST API for New Relic Applied Intelligence](/docs/rest-api-new-relic-ai) をご覧ください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="configure-source-splunk"
    title="Splunk"
  >
    インシデントインテリジェンスをSplunkのログモニタリングと統合することで、以下のことが可能になります。

    * お使いの環境のログデータを検索やキーワードのレポートにご利用ください。

    * アラートや検索レポートを、他のメトリクスやインシデントと関連付けることができます。

      <Callout variant="important">
        Applied Intelligenceは、Splunk Light、Splunk Cloud、Splunk Enterpriseのバージョン6.3以上に対応しています。
      </Callout>

      Splunkからデータを取得するには

    1. **Splunk コンソール** で、関連するイベントの検索を開始します。
    2. 検索結果をアラートとして保存し、アラートの条件を設定した後、配信方法としてWebhookを選択します。
    3. **[one.newrelic.com](https://one.newrelic.com)** にアクセスし、 **Alerts& AI** をクリックします。
    4. 左側の **Incident Intelligence** の下で、 **Sources** をクリックして、 **Splunk** をクリックします。
    5. コレクターの URL をコピーして、Splunk コンソールの webhook エンドポイントに貼り付けます。
    6. オプションです。Splunk トークンを使用して、 [アラートデータを Splunk メタデータでリッチ化する](#enrich-splunk-search).
  </Collapser>

  <Collapser
    className="freq-link"
    id="enrich-splunk-search"
    title="Splunkのメタデータ"
  >
    アラートデータをSplunkのメタデータでリッチ化するには、Splunkトークンを使用します。これにより、メタデータや検索結果の最初の行の値を含む検索データを活用することができます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            以下を行う場合...
          </th>

          <th>
            操作...
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            検索データへのアクセス
          </td>

          <td>
            フォーマット `$<フィールド名>$` を使用してください。たとえば、 `$app$` は、検索対象のアプリのコンテキストを表しています。
          </td>
        </tr>

        <tr>
          <td>
            アクセスフィールドの値
          </td>

          <td>
            検索で返された最初の結果行のフィールド値にアクセスするには、 `$result という形式を使用します。<フィールド名>$`.たとえば、ホスト値には `$result.host$` を、ソース・タイプには `$result.sourcetype$` を使用します。
          </td>
        </tr>

        <tr>
          <td>
            変数の使用
          </td>

          <td>
            Splunk の検索で **Selected fields** のいずれかを活用し、 **Selected fields** に任意のユニークなフィールドを追加して、データを変数として利用できるようにします。

            以下のフィールドには、相関エンジンへのヒントが自動的に与えられます。

            * `app`: parsed as `APPLICATION_NAME`
            * `application:`parsed as `APPLICATION_NAME`
            * `APPLICATION_NAME`: `APPLICATION_NAME と解析されます。`
            * `クラスタ`: `として解析されます CLUSTER_NAME`
            * `コンピュータ`: `と解析される HOST_NAME`
            * `Dc`: `として解析されます DATACENTER_NAME`
            * `datacenter`: `DATACENTER_NAME と解析されます。`
            * `ホスト`: `HOST_NAME と解析されます。`
            * `host_name`: `HOST_NAME と解析されます。`
            * `ホスト名：` `HOST_NAME として解析されます。`
            * `トランザクション`: `のように解析される EVENT_ID`
            * `Transaction_id`: `EVENT_ID として解析されます。`
            * `user`: `USER_NAME と解析されます。`
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## 3.目的地の設定 [#2-configure-destinations]

ソースの設定が完了したら、デスティネーション（課題を表示するデータ出力先）を設定します。

送信先の設定やメッセージテンプレートの設定方法については、 [「通知」に関するドキュメント](/docs/alerts-applied-intelligence/notifications/destinations/) をご参照ください。

## 4.ワークフローを設定する [#3-configure-workflows]

ワークフローの設定方法については、 [ワークフローに関するドキュメントをご覧ください](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows)。